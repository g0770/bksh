{% extends "base.html" %}
{% block title %}{{ book.title }} – BKSH{% endblock %}
{% block content %}
<div class="section mb-4">
  <h2 class="text">{{ book.title }}</h2>
  {% if book.subtitle %}
  <h5 class="text">{{ book.subtitle }}</h5>
  {% endif %}
  {% if book.description %}
  <p class="mt-3 text">{{ book.description }}</p>
  {% endif %}
  <small class="text d-block">
    Creado: {{ book.creation_date.strftime('%Y-%m-%d %H:%M') if book.creation_date else '' }}
  </small>
  <small class="text d-block mb-3">
    Actualizado: {{ book.last_update_date.strftime('%Y-%m-%d %H:%M') if book.last_update_date else '' }}
  </small>
</div>

<div class="section">
  <div class="mb-3 d-flex align-items-center justify-content-between">
    <h4 class="text">Capítulos</h4>
    <span class="text">Página {{ pagination.page }} de {{ pagination.pages or 1 }}</span>
  </div>

  {% if chapters %}
  <div class="list-group">
    {% for c in chapters %}
    <a href="{{ c.content_url }}" target="_blank" class="list-group-item list-group-item-action"
      style="background-color:#1e1e1e; color:#f5f5f5; border-color:#2a2a2a;">
      {{ c.title }}
    </a>
    {% endfor %}
  </div>
  {% else %}
  <p class="text">Este libro no tiene capítulos.</p>
  {% endif %}

  <nav class="mt-3">
    <ul class="pagination">
      <li class="page-item {{ 'disabled' if not pagination.has_prev }}">
        <a class="page-link"
          href="{{ url_for('book_detail', book_id=book.id, page=pagination.prev_num) if pagination.has_prev else '#' }}">
          Anterior
        </a>
      </li>
      <li class="page-item disabled">
        <a class="page-link" href="#">{{ pagination.page }}</a>
      </li>
      <li class="page-item {{ 'disabled' if not pagination.has_next }}">
        <a class="page-link"
          href="{{ url_for('book_detail', book_id=book.id, page=pagination.next_num) if pagination.has_next else '#' }}">
          Siguiente
        </a>
      </li>
    </ul>
  </nav>
</div>
{% endblock %}